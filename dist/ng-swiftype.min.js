angular.module("ngSwiftype",[]),angular.module("ngSwiftype").directive("swiftypeAutocomplete",["ngSwiftype.api",function(e){var t=["$scope",function(t){function i(e){var i=e.data.info,n=e.data.records,r=0;for(var s in i)t.results[s]=i[s],t.results[s].records=n[s],r+=i[s].total_result_count;t.results.record_count=r,t.loading=!1}function n(n,s){t.loading=!0,r.q=t.term,r.engine_key=t.engine_key,r.per_page=t.limits,r.fetch_fields=t.fetch_fields,r.search_fields=t.search_fields,r.filters=t.filters,r.page=n,e.search(r).then(i)}t.results={},t.error={},t.loading=!1;var r={};t.search_by=function(e,t){n(e,t)},t.keyup=function(e){var i=e.keyCode||e.which;return i>36&&41>i||16==i?!1:void(t.term&&t.term.length>2?n(t.page):(t.results={},t.$apply()))}}];return{restrict:"CE",controller:t,link:function(e,t,i){return i.engineKey?(e.engine_key=i.engineKey,e.limits=i.limits,i.fetchFields&&(e.fetch_fields=JSON.parse(i.fetchFields)),void t.bind("keyup",e.keyup)):(e.error={statusText:"Missing engine key"},!1)}}}]),angular.module("ngSwiftype").factory("ngSwiftype.cache",["$cacheFactory",function(e){return e("cache")}]),angular.module("ngSwiftype").service("ngSwiftype.api",["$http","ngSwiftype.cache",function(e,t){var i="https://api.swiftype.com/api/v1/public/engines/suggest.json";this.search=function(n){if(!n&&"object"!=typeof n)return!1;var r={};return r.q=n.q,r.engine_key=n.engine_key,r.page=n.page||1,r.per_page=n.per_page||20,r.search_fields=n.search_fields,r.fetch_fields=n.fetch_fields,r.filters=n.filters,r.document_types=n.document_types,r.functional_boosts=n.functional_boosts,r.sort_field=n.sort_field,r.sort_direction=n.sort_direction,e({method:"POST",url:i,data:r,cache:t})}}]);
//# sourceMappingURL=ng-swiftype.min.js.map